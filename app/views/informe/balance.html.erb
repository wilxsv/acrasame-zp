<div class="module">
 <div class="module-head"><h3>Balance de comprobaci√≥n</h3></div>
 <div class="module-body table">
  <table cellpadding="0" cellspacing="0" border="0" class="datatable-2 table table-bordered table-striped	 display" width="100%">
  <thead>
    <tr>
      <th colspan="3">Hacer balance parcial</th>
      <th colspan="3">
	   <%= form_for :transacx, :url => { :action => :balance } do |f| %>
		Fecha: <%= f.text_field :transaxFecha, id: "datepicker" %>
       <%= f.submit "Hacer", class:"btn btn-mini btn-primary" %>
	   <% end %>
	  </th>
    </tr>
    <tr>
      <th>Cuenta</th>
      <th>Nombre</th>
      <th>Debe</th>
      <th>Haber</th>
      <th>Deudor</th>
      <th>Acreedor</th>
    </tr>
  </thead>
  <tbody>
       <% session[:haber] = 0 %>
       <% session[:debe] = 0 %>
       <% deudor = 0 %>
       <% acreedor = 0 %>
       <% @ScrCuentua.each do |c| %>
        <tr>
         <td><%= c.cuentaCodigo %></td>
         <td><%= c.cuentaNombre %></td>
         <td><%= c.cuentaDebe %></td>
         <td><%= c.cuentaHaber %></td>
         <% if c.cuentaDebe - c.cuentaHaber >= 0 %>
          <td><%= c.cuentaDebe - c.cuentaHaber %></td>
          <% deudor = deudor + c.cuentaDebe - c.cuentaHaber %>
          <td></td>
         <% else %>
          <td></td>
          <td><%= c.cuentaHaber - c.cuentaDebe %></td>
          <% acreedor = acreedor + c.cuentaHaber - c.cuentaDebe %>
         <% end %>
        </tr>
        <% session[:haber] += c.cuentaHaber %>
        <% session[:debe] += c.cuentaDebe %>
       <% end %>
     </tbody>
  <tfoot>
    <tr>
      <th>Cuenta</th>
      <th>Nombre</th>
      <th><%= session[:debe].round(2) %></th>
      <th><%= session[:haber].round(2) %></th>
      <th><%= deudor.round(2) %></th>
      <th><%= acreedor.round(2) %></th>
    </tr>
  </tfoot>
</table>

<%= render :partial => '/layouts/main/tablas' %>
<!--       <tr>
        <td></td>
        <td></td>
        <td><b><%= session[:debe] %></b></td>
        <td><b><%= session[:haber] %></b></td>
       </tr>
-->
